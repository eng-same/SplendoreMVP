@model SplendoreMVP.View_Models.UserDetailsVM

@{
    ViewData["Title"] = "User Details";
}

<div class="container mt-4">
    <h2>User Details</h2>
    <hr />

    <div class="row mb-4">
        <div class="col-md-3 text-center">
            <img src="@(string.IsNullOrEmpty(Model.User.ProfilePic)
                                         ? "https://placehold.co/120x120"
                                         : Model.User.ProfilePic)"
                 class="rounded-circle img-fluid mb-2"
                 alt="Profile Picture" width="120" height="120" />
        </div>
        <div class="col-md-9">
            <dl class="row">
                <dt class="col-sm-3">Full Name</dt>
                <dd class="col-sm-9">@Model.User.FirstName @Model.User.LastName</dd>

                <dt class="col-sm-3">Email</dt>
                <dd class="col-sm-9">@Model.User.Email</dd>

                <dt class="col-sm-3">Username</dt>
                <dd class="col-sm-9">@Model.User.UserName</dd>

                <dt class="col-sm-3">Phone</dt>
                <dd class="col-sm-9">@Model.User.PhoneNumber</dd>
            </dl>
        </div>
    </div>

    <h4>Orders</h4>
    <table class="table table-bordered table-striped mt-3">
        <thead class="table-light">
            <tr>
                <th>Order #</th>
                <th>Date</th>
                <th>Status</th>
                <th>Total</th>
                <th style="width:200px;">Actions</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.Orders.Any())
            {
                foreach (var order in Model.Orders)
                {
                    <tr>
                        <td>@order.Id</td>
                        <td>@order.OrderDate.ToString("yyyy-MM-dd")</td>
                        <td>@order.Status</td>
                        <td>$@order.TotalAmount</td>
                        <td>
                            <a asp-area="Admin" asp-controller="Order" asp-action="Details" asp-route-id="@order.Id"
                               class="btn btn-sm btn-outline-info">Details</a>
                            <a asp-area="Admin" asp-controller="Order" asp-action="Edit" asp-route-id="@order.Id"
                               class="btn btn-sm btn-outline-warning">Edit</a>
                            <form asp-area="Admin" asp-controller="Order" asp-action="Delete" asp-route-id="@order.Id"
                                  method="post" class="d-inline">
                                <button type="submit" class="btn btn-sm btn-outline-danger"
                                        onclick="return confirm('Are you sure you want to delete this order?');">
                                    Delete
                                </button>
                            </form>
                        </td>
                    </tr>
                }
            }
            else
            {
                <tr>
                    <td colspan="5" class="text-center text-muted">No orders found for this user.</td>
                </tr>
            }
        </tbody>
    </table>

    <a asp-action="Index" class="btn btn-secondary">⬅ Back to Users</a>
</div>
